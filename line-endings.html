<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Line Endings
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="A summary."/>
    <meta name="author" content="Cameron Taggart"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="./content/style.css" />
    <script type="text/javascript" src="./content/tips.js"></script>
    <link rel="icon" href="http://ctaggart.github.io/SourceLink/SourceLink128.jpg">
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://github.com/ctaggart/SourceLink">github page</a></li>
        </ul>
        <h3 class="muted"><a href="./index.html">SourceLink</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Line-Endings" class="anchor" href="#Line-Endings">Line Endings</a></h1>

<p>The source files downloaded from the SCM such as GitHub must match exactly what was compiled. This includes the line endings. The checksums of the files that the compiler uses are stored in the <code>pdb</code>. Unfortunately, Git on Windows behaves like <code>core.autocrlf</code> is set to <code>true</code> by default. It will auto convert the line endings to <code>crlf</code> (carriage return, line feed) instead of leaving them just <code>lf</code> (line feed). They are stored in the Git repository as <code>lf</code> if you used a <code>.gitattributes</code> file which is recommended.</p>

<p>See what your current settings are using <code>git config --get</code>:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="i">get</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
<span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="k">global</span> <span class="o">--</span><span class="i">get</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
<span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="i">system</span> <span class="o">--</span><span class="i">get</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
<span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="i">local</span> <span class="o">--</span><span class="i">get</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
</code></pre></td>
</tr>
</table>

<p>The recommended way to prevent Git on Windows from auto converting line endings is to set <code>core.autocrlf</code> to <code>input</code>. It is easiest to do this <em>before</em> cloning.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="k">global</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span> <span class="i">input</span>
</code></pre></td>
</tr>
</table>

<p>That is the setting that we use for F# ProjectScaffold <a href="https://github.com/fsprojects/ProjectScaffold/blob/master/appveyor.yml#L2">in appveyor.yml</a>.</p>

<p>These settings may be unset:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="k">global</span> <span class="o">--</span><span class="i">unset</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
<span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="i">system</span> <span class="o">--</span><span class="i">unset</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
<span class="i">git</span> <span class="i">config</span> <span class="o">--</span><span class="i">local</span> <span class="o">--</span><span class="i">unset</span> <span class="i">core</span><span class="o">.</span><span class="i">autocrlf</span>
</code></pre></td>
</tr>
</table>

<p>Another way to configure git to use core.autocrlf input <em>when</em> cloning. For example:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">git</span> <span class="i">clone</span> <span class="i">https</span><span class="o">:</span><span class="c">//github.com/octokit/octokit.net.git -c core.autocrlf=input</span>
</code></pre></td>
</tr>
</table>

<p>If you agree that carriage returns are obsolete, you can configure the source files to <em>default</em> to <code>lf</code> in <code>.gitattributes</code>. The user is still able to override the setting by having a <code>core.autocrlf</code> set.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">*.</span><span class="i">cs</span> <span class="i">eol</span><span class="o">=</span><span class="i">lf</span>
<span class="o">*.</span><span class="i">fs</span> <span class="i">eol</span><span class="o">=</span><span class="i">lf</span>
</code></pre></td>
</tr>
</table>

<p>If you are unable to control the line endings using Git settings, SourceLink.exe 1.0 added a <code>linefeed</code> command that detects <code>crlf</code> line endings and turns them into <code>lf</code> for any compiled source files.</p>

<p><img src="https://cloud.githubusercontent.com/assets/80104/8490596/702f2bfc-20e0-11e5-8035-f3aef072f66a.png" alt="" /></p>

<p>For <a href="https://github.com/Microsoft/visualfsharp/issues/294#issuecomment-117922233">example</a>:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">SourceLink</span><span class="o">.</span><span class="i">exe</span> <span class="i">linefeed</span> <span class="o">-</span><span class="i">pr</span> <span class="o">.</span>
#<span class="i">run</span> <span class="i">build</span> <span class="i">here</span>
<span class="i">SourceLink</span><span class="o">.</span><span class="i">exe</span> <span class="i">index</span> <span class="o">-</span><span class="i">pr</span> <span class="o">.</span>
<span class="o">-</span><span class="i">pp</span> <span class="i">Configuration</span> <span class="i">Release</span> <span class="k">`</span>
<span class="o">-</span><span class="i">u</span> <span class="o">&#39;</span><span class="i">https</span><span class="o">:</span><span class="c">//raw.githubusercontent.com/Microsoft/visualfsharp/{0}/%var2%&#39;</span>
</code></pre></td>
</tr>
</table>


        </div>
        <div class="span3">
          <img src="http://ctaggart.github.io/SourceLink/SourceLink128.jpg" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">SourceLink</li>
            <li><a href="http://www.nuget.org/packages/SourceLink.Fake"><img src="http://img.shields.io/nuget/v/SourceLink.Fake.svg?style=flat" /></a></li>
            <li><a href="./index.html">Home page</a></li>
            <li><a href="./release-notes.html">Release Notes</a></li>
            
            <li><a href="./support.html">Support</a></li>
            <li><a href="./blog.html">Blog Posts</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="./line-endings.html">Line Endings</a></li>
            <li><a href="./exe.html">SourceLink.exe</a></li>
            <li><a href="./fake.html">FAKE</a></li>
            <li><a href="./how-it-works.html">How it Works</a></li>
            <li><a href="./visualstudio.html">Visual Studio</a></li>
            <li><a href="./github.html">GitHub</a></li>
            <li><a href="./tfs.html">TFS</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/ctaggart/SourceLink"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
</html>
